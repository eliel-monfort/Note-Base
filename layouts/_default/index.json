{{- $pages := where .Site.RegularPages "Type" "in" (slice "docs" "blog") -}}
{{- $notHidden := where $pages ".Params.hidden" "!=" true -}}
{{- $filtered := where $notHidden ".Title" "!=" nil -}}
[
  {{- range $index, $page := $filtered -}}
  {{- if $index -}},{{- end }}
  {
    "title": {{ $page.Title | jsonify }},
    "content": {{ $page.Plain | jsonify }},
    "url": {{ $page.RelPermalink | jsonify }},
    "section": {{ $page.Section | jsonify }}
  }
  {{- end -}}
]
